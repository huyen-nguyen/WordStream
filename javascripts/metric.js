function computeMetric(){var d=[getTfidf().toFixed(2),getCompactness(allW,layerPath)[0].toFixed(2),getCompactness(allW,layerPath)[1].toFixed(2),getDisplayRate(allW,maxFreq)[0].toFixed(2),getDisplayRate(allW,maxFreq)[1].toFixed(2)];metric2.selectAll(".metricValue").remove();metric2.selectAll(".metricValue").data(d).enter().append("text").text(function(a){return a}).attr("class","metricValue metricDisplay").attr("x","0").attr("y",function(a,c){return 43+36*c}).attr("font-weight","bold")}
function getTfidf(){var d=tfidf(globalData),a=[];d3.map(d,function(c){categories.forEach(function(b){a=a.concat(c.words[b])})});var c=0,f=0;a.forEach(function(a,b){f+=a.tf_idf;allW[b].placed&&(c+=a.tf_idf)});return c/f}function getCompactness(d,a){var c=0,f=0;d.forEach(function(b){f+=b.height*b.width;b.placed&&(c+=b.height*b.width)});var g=pathToPolygonViaSubdivision(a,1);g=polyArea(g);return[c/g,f/g]}
function getDisplayRate(d,a){var c=0,f=0,g=0,b=0,e=d3.scale.linear().domain([0,a]).range([0,1]);d.forEach(function(a){f+=a.frequency;a.placed&&(c+=a.frequency,b+=1,g+=e(a.frequency))});return[c/f,g/b]}
function pathToPolygonViaSubdivision(d,a,c){function f(a){var c=d.node().getPointAtLength(a);c.d=a;return c}function g(b,d){for(var e=[b],h=1,k=(d.d-b.d)/c;h<c;h++)e[h]=f(b.d+k*h);e.push(d);for(var l=0,n=e.length,m=0;m<n;++m)h=e[m],k=e[(m-1+n)%n],l+=(k.x+h.x)*(k.y-h.y);if(Math.abs(l/2)<=a)return[b,d];h=[];for(k=1;k<e.length;++k)l=g(e[k-1],e[k]),l.pop(),h=h.concat(l);h.push(d);return h}a||(a=1E-4);c||(c=3);for(var b=g(f(0),f(d.node().getTotalLength())),e=b.length;e--;)b[e]=[b[e].x,b[e].y];e=document.createElementNS("http://www.w3.org/2000/svg",
    "polygon");e.setAttribute("points",b.join(" "));return e}function polyArea(d){var a=0;d=d.points;for(var c=d.numberOfItems,f=0;f<c;++f){var g=d.getItem(f),b=d.getItem((f+c-1)%c);a+=(b.x+g.x)*(b.y-g.y)}return Math.abs(a/2)};